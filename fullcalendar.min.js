/*!
 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(t,e){function n(e){t.extend(!0,He,e)}function r(n,r,f){function d(t){le?y()&&(x(),T(t)):h()}function h(){ce=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),r.theme&&n.addClass("ui-widget"),le=t("<div class='fc-content' style='position:relative'/>").prependTo(n),ie=new a(re,r),se=ie.render(),se&&n.prepend(se),b(r.defaultView),r.handleWindowResize&&t(window).resize(k),w()||g()}function g(){setTimeout(function(){!ue.start&&w()&&S()},0)}function p(){ue&&(ne("viewDestroy",ue,ue,ue.element),ue.triggerEventDestroy()),t(window).unbind("resize",k),ie.destroy(),le.remove(),n.removeClass("fc fc-rtl ui-widget")}function y(){return n.is(":visible")}function w(){return t("body").is(":visible")}function b(t){ue&&t==ue.name||C(t)}function C(e){pe++,ue&&(ne("viewDestroy",ue,ue,ue.element),j(),ue.triggerEventDestroy(),Q(),ue.element.remove(),ie.deactivateButton(ue.name)),ie.activateButton(e),ue=new Fe[e](t("<div class='fc-view fc-view-"+e+"' style='position:relative'/>").appendTo(le),re),S(),K(),pe--}function S(t){(!ue.start||t||ue.start>me||me>=ue.end)&&y()&&T(t)}function T(t){pe++,ue.start&&(ne("viewDestroy",ue,ue,ue.element),j(),W()),Q(),ue.render(me,t||0),H(),K(),(ue.afterRender||A)(),I(),P(),ne("viewRender",ue,ue,ue.element),ue.trigger("viewDisplay",ve),pe--,L()}function E(){y()&&(j(),W(),x(),H(),N())}function x(){de=r.contentHeight?function(){return r.contentHeight}:r.height?"function"==typeof r.height?function(){var t=se?se.height():0,e=z(le),n=r.height();return n-t-e}:function(){var t=se?se.height():0,e=z(le);return r.height-t-e}:function(){return Math.round(le.width()/Math.max(r.aspectRatio,.5))}}function H(){de===e&&x(),pe++,ue.setHeight(de()),ue.setWidth(le[0].getBoundingClientRect().width),pe--,fe=n.outerWidth()}function k(){if(!pe)if(ue.start){var t=++ge;setTimeout(function(){t==ge&&!pe&&y()&&fe!=(fe=n.outerWidth())&&(pe++,E(),ue.trigger("windowResize",ve),pe--)},200)}else g()}function R(){W(),O()}function F(t){W(),N(t)}function N(t){y()&&(ue.setEventData(ye),ue.renderEvents(ye,t),ue.trigger("eventAfterAllRender"))}function W(){ue.triggerEventDestroy(),ue.clearEvents(),ue.clearEventData()}function L(){!r.lazyFetching||ae(ue.visStart,ue.visEnd)?O():N()}function O(){oe(ue.visStart,ue.visEnd)}function Y(t){ye=t,ye.forEach(re.normalizeEvent),N()}function q(t){F(t)}function I(){ie.updateTitle(ue.title)}function P(){var t=new Date;t>=ue.start&&ue.end>t?ie.disableButton("today"):ie.enableButton("today")}function _(t,n,r){ue.select(t,n,r===e?!0:r)}function j(){ue&&ue.unselect()}function B(){S(-1)}function X(){S(1)}function J(){l(me,-1),S()}function V(){l(me,1),S()}function G(){me=new Date,S()}function U(t,e,n){t instanceof Date?me=v(t):m(me,t,e,n),S()}function Z(t,n,r){t!==e&&l(me,t),n!==e&&c(me,n),r!==e&&u(me,r),S()}function $(){return v(me)}function Q(){le.css({width:"100%",height:le.height(),overflow:"hidden"})}function K(){le.css({width:"",height:"",overflow:""})}function te(){return ue}function ee(t,n){return n===e?r[t]:(r[t]=n,("height"==t||"contentHeight"==t||"aspectRatio"==t)&&E(),e)}function ne(t,n){return r[t]?r[t].apply(n||ve,Array.prototype.slice.call(arguments,2)):e}var re=this;re.options=r,re.render=d,re.destroy=p,re.refetchEvents=R,re.reportEvents=Y,re.reportEventChange=q,re.rerenderEvents=F,re.changeView=b,re.select=_,re.unselect=j,re.prev=B,re.next=X,re.prevYear=J,re.nextYear=V,re.today=G,re.gotoDate=U,re.incrementDate=Z,re.formatDate=function(t,e){return D(t,e,r)},re.formatDates=function(t,e,n){return M(t,e,n,r)},re.getDate=$,re.getView=te,re.option=ee,re.trigger=ne,o.call(re,r,f);var ae=re.isFetchNeeded,oe=re.fetchEvents;i.call(re,r),s.call(re,r);var ie,se,le,ce,ue,fe,de,he,ve=n[0],ge=0,pe=0,me=new Date,ye=[];m(me,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(he=a,ue.dragStart(he,e,n))}}).bind("dragstop",function(t,e){he&&(ue.dragStop(he,t,e),he=null)})}function a(n,r){function a(){h=r.theme?"ui":"fc";var n=r.header;return n?v=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(i("left")).append(i("center")).append(i("right"))):e}function o(){v.remove()}function i(e){var a=t("<td class='fc-header-"+e+"'/>"),o=r.header[e];return o&&t.each(o.split(" "),function(e){e>0&&a.append("<span class='fc-header-space'/>");var o;t.each(this.split(","),function(e,i){if("title"==i)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(h+"-corner-right"),o=null;else{var s;if(n[i]?s=n[i]:Fe[i]&&(s=function(){u.removeClass(h+"-state-hover"),n.changeView(i)}),s){var l=r.theme?P(r.buttonIcons,i):null,c=P(r.buttonText,i),u=t("<span class='fc-button fc-button-"+i+" "+h+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>").click(function(){u.hasClass(h+"-state-disabled")||s()}).mousedown(function(){u.not("."+h+"-state-active").not("."+h+"-state-disabled").addClass(h+"-state-down")}).mouseup(function(){u.removeClass(h+"-state-down")}).hover(function(){u.not("."+h+"-state-active").not("."+h+"-state-disabled").addClass(h+"-state-hover")},function(){u.removeClass(h+"-state-hover").removeClass(h+"-state-down")}).appendTo(a);j(u),o||u.addClass(h+"-corner-left"),o=u}}}),o&&o.addClass(h+"-corner-right")}),a}function s(t){v.find("h2").html(t)}function l(t){v.find("span.fc-button-"+t).addClass(h+"-state-active")}function c(t){v.find("span.fc-button-"+t).removeClass(h+"-state-active")}function u(t){v.find("span.fc-button-"+t).addClass(h+"-state-disabled")}function f(t){v.find("span.fc-button-"+t).removeClass(h+"-state-disabled")}var d=this;d.render=a,d.destroy=o,d.updateTitle=s,d.activateButton=l,d.deactivateButton=c,d.disableButton=u,d.enableButton=f;var h,v=t([])}function o(n,r){function a(t,e){return!S||S>t||e>T}function o(t,e){S=t,T=e,W=[];var n=++F,r=R.length;N=r;for(var a=0;r>a;a++)i(R[a],n)}function i(e,r){s(e,function(a){if(r==F){if(a){n.eventDataTransform&&(a=t.map(a,n.eventDataTransform)),e.eventDataTransform&&(a=t.map(a,e.eventDataTransform));for(var o=0;a.length>o;o++)a[o].source=e,w(a[o]);W=W.concat(a)}N--,N||H(W)}})}function s(r,a){var o,i,l=Re.sourceFetchers;for(o=0;l.length>o;o++){if(i=l[o](r,S,T,a),i===!0)return;if("object"==typeof i)return s(i,a),e}var c=r.events;if(c)t.isFunction(c)?(p(),c(v(S),v(T),function(t){a(t),m()})):t.isArray(c)?a(c):a();else{var u=r.url;if(u){var f,d=r.success,h=r.error,g=r.complete;f=t.isFunction(r.data)?r.data():r.data;var y=t.extend({},f||{}),w=V(r.startParam,n.startParam),b=V(r.endParam,n.endParam);w&&(y[w]=Math.round(+S/1e3)),b&&(y[b]=Math.round(+T/1e3)),p(),t.ajax(t.extend({},Ne,r,{data:y,success:function(e){e=e||[];var n=J(d,this,arguments);t.isArray(n)&&(e=n),a(e)},error:function(){J(h,this,arguments),a()},complete:function(){J(g,this,arguments),m()}}))}else a()}}function l(t){t=c(t),t&&(N++,i(t,F))}function c(n){return t.isFunction(n)||t.isArray(n)?n={events:n}:"string"==typeof n&&(n={url:n}),"object"==typeof n?(b(n),R.push(n),n):e}function u(e){R=t.grep(R,function(t){return!D(t,e)}),W=t.grep(W,function(t){return!D(t.source,e)}),H(W)}function f(t){var e,n,r=W.length,a=x().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;r>e;e++)n=W[e],n._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),n.end=t.end?n.end?new Date(+n.end+i):new Date(+a(n)+i):null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,w(n));w(t),H(W)}function d(t,e){w(t),t.source||(e&&(k.events.push(t),t.source=k),W.push(t)),H(W)}function h(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}W=t.grep(W,e,!0);for(var r=0;R.length>r;r++)t.isArray(R[r].events)&&(R[r].events=t.grep(R[r].events,e,!0))}else{W=[];for(var r=0;R.length>r;r++)t.isArray(R[r].events)&&(R[r].events=[])}H(W)}function g(e){return t.isFunction(e)?t.grep(W,e):e?(e+="",t.grep(W,function(t){return t._id==e})):W}function p(){z++||E("loading",null,!0,x())}function m(){--z||E("loading",null,!1,x())}function w(r){var a=r.source||{},o=V(a.ignoreTimezone,n.ignoreTimezone);if(r._id=r._id||(r.id===e?"_fc"+ze++:r.id+""),r.date&&(r.start||(r.start=r.date),delete r.date),r._start=v(r.start=y(r.start,o)),r.end=y(r.end,o),r.end&&r.end<=r.start&&(r.end=null),r._end=r.end?v(r.end):null,r.allDay===e&&(r.allDay=V(a.allDayDefault,n.allDayDefault)),r.className?"string"==typeof r.className&&(r.className=r.className.split(/\s+/)):r.className=[],r.resourceId){var i=null==n.resources?[]:n.resources;t.each(i,function(t,e){e.id===r.resourceId&&(r.resource=e)})}}function b(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Re.sourceNormalizers,n=0;e.length>n;n++)e[n](t)}function D(t,e){return t&&e&&M(t)==M(e)}function M(t){return("object"==typeof t?t.events||t.url:"")||t}var C=this;C.isFetchNeeded=a,C.fetchEvents=o,C.addEventSource=l,C.removeEventSource=u,C.updateEvent=f,C.renderEvent=d,C.removeEvents=h,C.clientEvents=g,C.normalizeEvent=w;for(var S,T,E=C.trigger,x=C.getView,H=C.reportEvents,k={events:[]},R=[k],F=0,N=0,z=0,W=[],L=0;r.length>L;L++)c(r[L])}function i(n){function r(e){var n={};if(t.isFunction(e))n={resources:e},c.push(n);else if("string"==typeof e)n={url:e},c.push(n);else if("object"==typeof e)for(var r=0;e.length>r;r++){var a=e[r];i(a),n={resources:a},c.push(n)}}function a(t){if(t=t!==e?t:!0,l!=e&&t)return l;l=[];for(var n=c.length,r=0;n>r;r++){var a=o(c[r]);l=l.concat(a)}return l}function o(e){var n=e.resources;if(n){if(t.isFunction(n))return n()}else{var r=e.url;r&&t.ajax({url:r,dataType:"json",cache:!1,success:function(t){t=t||[],n=t},error:function(){alert("ajax error")},async:!1})}return n}function i(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Re.sourceNormalizers,n=0;e.length>n;n++)e[n](t)}var s=this;s.fetchResources=a;var l,c=[];r(n.resources)}function s(n){function r(e){var n={};if(t.isFunction(e))n={highlights:e},c.push(n);else if("string"==typeof e)n={url:e},c.push(n);else if("object"==typeof e)for(var r=0;e.length>r;r++){var a=e[r];i(a),n={highlights:a},c.push(n)}}function a(t){if(t=t!==e?t:!0,l!=e&&t)return l;l=[];for(var n=c.length,r=0;n>r;r++){var a=o(c[r]);l=l.concat(a)}return l}function o(e){var n=e.highlights;if(n){if(t.isFunction(n))return n()}else{var r=e.url;r&&t.ajax({url:r,dataType:"json",cache:!1,success:function(t){t=t||[],n=t},error:function(){alert("ajax error")},async:!1})}return n}function i(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Re.sourceNormalizers,n=0;e.length>n;n++)e[n](t)}var s=this;s.fetchHighlights=a;var l,c=[];r(n.highlights)}function l(t,e,n){return t.setFullYear(t.getFullYear()+e),n||h(t),t}function c(t,e,n){if(+t){var r=t.getMonth()+e,a=v(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||h(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(a>t?1:-1))}return t}function u(t,e,n){if(+t){var r=t.getDate()+e,a=v(t);a.setHours(9),a.setDate(r),t.setDate(r),n||h(t),f(t,a)}return t}function f(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*Oe)}function d(t,e){return t.setMinutes(t.getMinutes()+e),t}function h(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function v(t,e){return e?h(new Date(+t)):new Date(+t)}function g(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function p(t,e){return Math.round((v(t,!0)-v(e,!0))/Le)}function m(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function y(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),w(t,n)||(t?new Date(t):null)):null}function w(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),f(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),f(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+1e3*60*o)}return r}function b(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function D(t,e,n){return M(t,null,e,n)}function M(t,e,n,r){r=r||He;var a,o,i,s,l=t,c=e,u=n.length,f="";for(a=0;u>a;a++)if(o=n.charAt(a),"'"==o){for(i=a+1;u>i;i++)if("'"==n.charAt(i)){l&&(f+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;u>i;i++)if(")"==n.charAt(i)){var d=D(l,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(f+=d),a=i;break}}else if("["==o){for(i=a+1;u>i;i++)if("]"==n.charAt(i)){var h=n.substring(a+1,i),d=D(l,h,r);d!=D(c,h,r)&&(f+=d),a=i;break}}else if("{"==o)l=e,c=t;else if("}"==o)l=t,c=e;else{for(i=u;i>a;i--)if(s=Ye[n.substring(a,i)]){l&&(f+=s(l,r)),a=i-1;break}i==a&&l&&(f+=o)}return f}function C(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}function S(t){return t.end?T(t.end,t.allDay):u(v(t.start),1)}function T(t,e){return t=v(t),e||t.getHours()||t.getMinutes()?u(t,1):h(t)}function E(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i,s,l=n.target;l!=this;)o=l,l=l.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function x(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.width(Math.max(0,n-k(a,r)))}function H(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.height(Math.max(0,n-z(a,r)))}function k(t,e){return R(t)+N(t)+(e?F(t):0)}function R(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function F(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function N(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function z(t,e){return W(t)+O(t)+(e?L(t):0)}function W(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function L(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function O(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function A(){}function Y(t,e){return t-e}function q(t){return Math.max.apply(Math,t)}function I(t){return(10>t?"0":"")+t}function P(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if(r=t[a[o].toLowerCase()],r!==e)return r;return t[""]}function _(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function j(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function B(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function X(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function J(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;e.length>a;a++)o=e[a].apply(n,r)||o;return o}}function V(){for(var t=0;arguments.length>t;t++)if(arguments[t]!==e)return arguments[t]}function G(t,e){function n(t,e){e&&(c(t,e),t.setDate(1));var n=a("firstDay"),f=v(t,!0);f.setDate(1);var d=c(v(f),1),h=v(f);u(h,-((h.getDay()-n+7)%7)),i(h);var g=v(d);u(g,(7-g.getDay()+n)%7),i(g,-1,!0);var m=s(),y=Math.round(p(g,h)/7);"fixed"==a("weekMode")&&(u(g,7*(6-y)),y=6),r.title=l(f,a("titleFormat")),r.start=f,r.end=d,r.visStart=h,r.visEnd=g,o(y,m,!0)}var r=this;r.render=n,$.call(r,t,e,"month");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=r.getCellsPerWeek,l=e.formatDate}function U(t,e){function n(t,e){e&&u(t,7*e);var n=u(v(t),-((t.getDay()-a("firstDay")+7)%7)),c=u(v(n),7),f=v(n);i(f);var d=v(c);i(d,-1,!0);var h=s();r.start=n,r.end=c,r.visStart=f,r.visEnd=d,r.title=l(f,u(v(d),-1),a("titleFormat")),o(1,h,!1)}var r=this;r.render=n,$.call(r,t,e,"basicWeek");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=r.getCellsPerWeek,l=e.formatDates}function Z(t,e){function n(t,e){e&&u(t,e),i(t,0>e?-1:1);var n=v(t,!0),l=u(v(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=l,o(1,1,!1)}var r=this;r.render=n,$.call(r,t,e,"basicDay");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=e.formatDate}function $(e,n,r){function a(t,e,n){ee=t,ne=e,re=n,o(),I||i(),s()}function o(){le=he("theme")?"ui":"fc",ce=he("columnFormat"),ue=he("weekNumbers"),fe=he("weekNumberTitle"),de="iso"!=he("weekNumberCalculation")?"w":"W"}function i(){U=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function s(){var n=l();A&&A.remove(),A=t(n).appendTo(e),Y=A.find("thead"),q=Y.find(".fc-day-header"),I=A.find("tbody"),P=I.find("tr"),X=I.find(".fc-day"),J=P.find("td:first-child"),V=P.eq(0).find(".fc-day > div"),G=P.eq(0).find(".fc-day-content > div"),B(Y.add(Y.find("tr"))),B(P),P.eq(0).addClass("fc-first"),P.filter(":last").addClass("fc-last"),X.each(function(e,n){var r=we(Math.floor(e/ne),e%ne);ve("dayRender",O,r,t(n))}),m(X)}function l(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+c()+f()+"</table>";return t}function c(){var t,e,n=le+"-widget-header",r="";for(r+="<thead><tr>",ue&&(r+="<th class='fc-week-number "+n+"'>"+_(fe)+"</th>"),t=0;ne>t;t++)e=we(0,t),r+="<th class='fc-day-header fc-"+We[e.getDay()]+" "+n+"'>"+_(Ee(e,ce))+"</th>";return r+="</tr></thead>"}function f(){var t,e,n,r=le+"-widget-content",a="";for(a+="<tbody>",t=0;ee>t;t++){for(a+="<tr class='fc-week'>",ue&&(n=we(t,0),a+="<td class='fc-week-number "+r+"'>"+"<div>"+_(Ee(n,de))+"</div>"+"</td>"),e=0;ne>e;e++)n=we(t,e),a+=d(n);a+="</tr>"}return a+="</tbody>"}function d(t){var e=le+"-widget-content",n=O.start.getMonth(),r=h(new Date),a="",o=["fc-day","fc-"+We[t.getDay()],e];return t.getMonth()!=n&&o.push("fc-other-month"),+t==+r?o.push("fc-today",le+"-state-highlight"):r>t?o.push("fc-past"):o.push("fc-future"),a+="<td class='"+o.join(" ")+"'"+" data-date='"+Ee(t,"yyyy-MM-dd")+"'"+">"+"<div>",re&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function g(e){$=e;var n,r,a,o=$-Y.height();"variable"==he("weekMode")?n=r=Math.floor(o/(1==ee?2:6)):(n=Math.floor(o/ee),r=o-n*(ee-1)),J.each(function(e,o){ee>e&&(a=t(o),a.find("> div").css("min-height",(e==ee-1?r:n)-z(a)))})}function p(t){Z=t,ie.clear(),se.clear(),te=0,ue&&(te=Y.find("th.fc-week-number").outerWidth()),K=Math.floor((Z-te)/ne),x(q.slice(0,-1),K)}function m(t){t.click(y).mousedown(ye)}function y(e){if(!he("selectable")){var n=w(t(this).data("date"));ve("dayClick",this,n,!0,e)}}function b(t,e,n){n&&ae.build();for(var r=De(t,e),a=0;r.length>a;a++){var o=r[a];m(D(o.row,o.leftCol,o.row,o.rightCol))}}function D(t,n,r,a){var o=ae.rect(t,n,r,a,e);return ge(o,e)}function M(t){return v(t)}function C(t,e){b(t,u(v(e),1),!0)}function S(){pe()}function T(t,e,n){var r=be(t),a=X[r.row*ne+r.col];ve("dayClick",a,t,e,n)}function E(t,e){oe.start(function(t){pe(),t&&D(t.row,t.col,t.row,t.col)},e)}function H(t,e,n){var r=oe.stop();if(pe(),r){var a=we(r);ve("drop",t,a,!0,e,n)}}function k(t){return v(t.start)}function R(t){return ie.left(t)}function F(t){return ie.right(t)}function N(t){return se.left(t)}function W(t){return se.right(t)}function L(t){return P.eq(t)}var O=this;O.renderBasic=a,O.setHeight=g,O.setWidth=p,O.renderDayOverlay=b,O.defaultSelectionEnd=M,O.renderSelection=C,O.clearSelection=S,O.reportDayClick=T,O.dragStart=E,O.dragStop=H,O.defaultEventEnd=k,O.getHoverListener=function(){return oe},O.colLeft=R,O.colRight=F,O.colContentLeft=N,O.colContentRight=W,O.getIsCellAllDay=function(){return!0},O.allDayRow=L,O.getRowCnt=function(){return ee},O.getColCnt=function(){return ne},O.getColWidth=function(){return K},O.getDaySegmentContainer=function(){return U},me.call(O,e,n,r),Ce.call(O),Me.call(O),Q.call(O);var A,Y,q,I,P,X,J,V,G,U,Z,$,K,te,ee,ne,re,ae,oe,ie,se,le,ce,ue,fe,de,he=O.opt,ve=O.trigger,ge=O.renderOverlay,pe=O.clearOverlays,ye=O.daySelectionMousedown,we=O.cellToDate,be=O.dateToCell,De=O.rangeToSegments,Ee=n.formatDate;j(e.addClass("fc-grid")),ae=new Se(function(e,n){var r,a,o;q.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),P.each(function(n,i){ee>n&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),oe=new Te(ae),ie=new xe(function(t){return V.eq(t)}),se=new xe(function(t){return G.eq(t)})}function Q(){function t(t,e){n.renderDayEvents(t,e)}function e(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=t,n.clearEvents=e,ye.call(n)}function K(t,e){function n(t,e){e&&u(t,7*e);var n=u(v(t),-((t.getDay()-a("firstDay")+7)%7)),c=u(v(n),7),f=v(n);i(f);var d=v(c);i(d,-1,!0);var h=s();r.title=l(f,u(v(d),-1),a("titleFormat")),r.start=n,r.end=c,r.visStart=f,r.visEnd=d,o(h)}var r=this;r.render=n,ee.call(r,t,e,"agendaWeek");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,s=r.getCellsPerWeek,l=e.formatDates}function te(t,e){function n(t,e){e&&u(t,e),i(t,0>e?-1:1);var n=v(t,!0),l=u(v(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=l,o(1)}var r=this;r.render=n,ee.call(r,t,e,"agendaDay");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,s=e.formatDate}function ee(n,r,a){function o(t){ze=t,i(),K?l():s()}function i(){Ie=Ge("theme")?"ui":"fc",Pe=Ge("isRTL"),_e=b(Ge("minTime")),je=b(Ge("maxTime")),Be=Ge("columnFormat"),Xe=Ge("weekNumbers"),Je=Ge("weekNumberTitle"),Ve="iso"!=Ge("weekNumberCalculation")?"w":"W",Re=Ge("snapMinutes")||Ge("slotMinutes")}function s(){var e,r,a,o,i,s=Ie+"-widget-header",c=Ie+"-widget-content",u=0==Ge("slotMinutes")%15;for(l(),ce=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Ge("allDaySlot")?(ue=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ce),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+Ge("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+s+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",fe=t(e).appendTo(ce),de=fe.find("tr"),M(de.find("td")),ce.append("<div class='fc-agenda-divider "+s+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):ue=t([]),he=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ce),ve=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(he),ge=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ve),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=g(),o=d(v(r),je),d(r,_e),Le=0,a=0;o>r;a++)i=r.getMinutes(),e+="<tr class='fc-slot"+a+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+s+"'>"+(u&&i?"&nbsp;":on(r,Ge("axisFormat")))+"</th>"+"<td class='"+c+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",d(r,Ge("slotMinutes")),Le++;e+="</tbody></table>",pe=t(e).appendTo(ve),C(pe.find("td"))}function l(){var e=c();K&&K.remove(),K=t(e).appendTo(n),te=K.find("thead"),ee=te.find("th").slice(1,-1),re=K.find("tbody"),ae=re.find("td").slice(0,-1),oe=ae.find("> div"),ie=ae.find(".fc-day-content > div"),se=ae.eq(0),le=oe.eq(0),B(te.add(te.find("tr"))),B(re.add(re.find("tr")))}function c(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+f()+p()+"</table>";return t}function f(){var t,e,n,r=Ie+"-widget-header",a="";for(a+="<thead><tr>",Xe?(t=nn(0,0),e=on(t,Ve),Pe?e+=Je:e=Je+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+_(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;ze>n;n++)t=nn(0,n),a+="<th class='fc-"+We[t.getDay()]+" fc-col"+n+" "+r+"'>"+_(on(t,Be))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function p(){var t,e,n,r,a,o=Ie+"-widget-header",i=Ie+"-widget-content",s=h(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n="",e=0;ze>e;e++)t=nn(0,e),a=["fc-col"+e,"fc-"+We[t.getDay()],i],+t==+s?a.push(Ie+"-state-highlight","fc-today"):s>t?a.push("fc-past"):a.push("fc-future"),r="<td class='"+a.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",n+=r;return l+=n,l+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function m(t){t===e&&(t=be),be=t,sn={};var n=re.position().top,r=he.position().top,a=Math.min(t-n,pe.height()+r+1);le.height(a-z(se)),ce.css("top",n),he.height(a-r-1),ke=pe.find("tr:first").height()+1,Fe=Ge("slotMinutes")/Re,Ne=ke/Fe}function y(e){we=e,Ye.clear(),qe.clear();var n=te.find("th:first");fe&&(n=n.add(fe.find("th:first"))),n=n.add(pe.find("th:first")),De=0,x(n.width("").each(function(e,n){De=Math.max(De,t(n).outerWidth())}),De);var r=K.find(".fc-agenda-gutter");fe&&(r=r.add(fe.find("th.fc-agenda-gutter")));var a=he[0].clientWidth;He=he.width()-a,He?(x(r,He),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),Ee=Math.floor((a-De)/ze),x(ee.slice(0,-1),Ee)}function w(){function t(){he.scrollTop(r)}var e=g(),n=v(e);n.setHours(Ge("firstHour"));var r=A(e,n)+1;t(),setTimeout(t,0)}function D(){w()}function M(t){t.click(S).mousedown(tn)}function C(t){t.click(S).mousedown(G)}function S(t){if(!Ge("selectable")){var e=Math.min(ze-1,Math.floor((t.pageX-K.offset().left-De)/Ee)),n=nn(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*Ge("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+_e),Ue("dayClick",ae[e],n,!1,t)}else Ue("dayClick",ae[e],n,!0,t)}}function T(t,e,n){n&&Oe.build();for(var r=an(t,e),a=0;r.length>a;a++){var o=r[a];M(E(o.row,o.leftCol,o.row,o.rightCol))}}function E(t,e,n,r){var a=Oe.rect(t,e,n,r,ce);return Ze(a,ce)}function k(t,e){for(var n=0;ze>n;n++){var r=nn(0,n),a=u(v(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(i>o){var s=Oe.rect(0,n,0,n,ve),l=A(r,o),c=A(r,i);s.top=l,s.height=c-l,C(Ze(s,ve))}}}function R(t){return Ye.left(t)}function F(t){return qe.left(t)}function N(t){return Ye.right(t)}function W(t){return qe.right(t)}function L(t){return Ge("allDaySlot")&&!t.row}function O(t){var e=nn(0,t.col),n=t.row;return Ge("allDaySlot")&&n--,n>=0&&d(e,_e+n*Re),e}function A(t,n){if(t=v(t,!0),d(v(t),_e)>n)return 0;if(n>=d(v(t),je))return pe.height();var r=Ge("slotMinutes"),a=60*n.getHours()+n.getMinutes()-_e,o=Math.floor(a/r),i=sn[o];return i===e&&(i=sn[o]=pe.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+ke*(a%r/r)))}function q(){return de}function I(t){var e=v(t.start);return t.allDay?e:d(e,Ge("defaultEventMinutes"))}function P(t,e){return e?v(t):d(v(t),Ge("slotMinutes"))}function X(t,e,n){n?Ge("allDaySlot")&&T(t,u(v(e),1),!0):J(t,e)}function J(e,n){var r=Ge("selectHelper");if(Oe.build(),r){var a=rn(e).col;if(a>=0&&ze>a){var o=Oe.rect(0,a,0,a,ve),i=A(e,e),s=A(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var l=r(e,n);l&&(o.position="absolute",ye=t(l).css(o).appendTo(ve))}else o.isStart=!0,o.isEnd=!0,ye=t(en({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o)),ye.css("opacity",Ge("dragOpacity"));ye&&(C(ye),ve.append(ye),x(ye,o.width,!0),H(ye,o.height,!0))}}}else k(e,n)}function V(){$e(),ye&&(ye.remove(),ye=null)}function G(e){if(1==e.which&&Ge("selectable")){Ke(e);var n;Ae.start(function(t,e){if(V(),t&&t.col==e.col&&!L(t)){var r=O(e),a=O(t);n=[r,d(v(r),Re),a,d(v(a),Re)].sort(Y),J(n[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){Ae.stop(),n&&(+n[0]==+n[1]&&U(n[0],!1,t),Qe(n[0],n[3],!1,t))})}}function U(t,e,n){Ue("dayClick",ae[rn(t).col],t,e,n)}function Z(t,e){Ae.start(function(t){if($e(),t)if(L(t))E(t.row,t.col,t.row,t.col);else{var e=O(t),n=d(v(e),Ge("defaultEventMinutes"));k(e,n)}},e)}function $(t,e,n){var r=Ae.stop();$e(),r&&Ue("drop",t,O(r),L(r),e,n)}var Q=this;Q.renderAgenda=o,Q.setWidth=y,Q.setHeight=m,Q.afterRender=D,Q.defaultEventEnd=I,Q.timePosition=A,Q.getIsCellAllDay=L,Q.allDayRow=q,Q.getCoordinateGrid=function(){return Oe},Q.getHoverListener=function(){return Ae},Q.colLeft=R,Q.colRight=N,Q.colContentLeft=F,Q.colContentRight=W,Q.getDaySegmentContainer=function(){return ue},Q.getSlotSegmentContainer=function(){return ge},Q.getMinMinute=function(){return _e},Q.getMaxMinute=function(){return je},Q.getSlotContainer=function(){return ve},Q.getRowCnt=function(){return 1},Q.getColCnt=function(){return ze},Q.getColWidth=function(){return Ee},Q.getSnapHeight=function(){return Ne},Q.getSnapMinutes=function(){return Re},Q.defaultSelectionEnd=P,Q.renderDayOverlay=T,Q.renderSelection=X,Q.clearSelection=V,Q.reportDayClick=U,Q.dragStart=Z,Q.dragStop=$,me.call(Q,n,r,a),Ce.call(Q),Me.call(Q),ne.call(Q);var K,te,ee,re,ae,oe,ie,se,le,ce,ue,fe,de,he,ve,ge,pe,ye,we,be,De,Ee,He,ke,Re,Fe,Ne,ze,Le,Oe,Ae,Ye,qe,Ie,Pe,_e,je,Be,Xe,Je,Ve,Ge=Q.opt,Ue=Q.trigger,Ze=Q.renderOverlay,$e=Q.clearOverlays,Qe=Q.reportSelection,Ke=Q.unselect,tn=Q.daySelectionMousedown,en=Q.slotSegHtml,nn=Q.cellToDate,rn=Q.dateToCell,an=Q.rangeToSegments,on=r.formatDate,sn={};j(n.addClass("fc-agenda")),Oe=new Se(function(e,n){function r(t){return Math.max(l,Math.min(c,t))}var a,o,i;ee.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),Ge("allDaySlot")&&(a=de,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=ve.offset().top,l=he.offset().top,c=l+he.outerHeight(),u=0;Le*Fe>u;u++)e.push([r(s+Ne*u),r(s+Ne*(u+1))])}),Ae=new Te(Oe),Ye=new xe(function(t){return oe.eq(t)}),qe=new xe(function(t){return ie.eq(t)})}function ne(){function n(t,e){var n,r=t.length,o=[],i=[];for(n=0;r>n;n++)t[n].allDay?o.push(t[n]):i.push(t[n]);y("allDaySlot")&&(te(o,e),T()),s(a(i),e)}function r(){x().empty(),R().empty()}function a(e){var n,r,a,s,l,c=I(),u=W(),f=N(),h=t.map(e,i),g=[];for(r=0;c>r;r++)for(n=q(0,r),d(n,u),l=o(e,h,n,d(v(n),f-u)),l=re(l),a=0;l.length>a;a++)s=l[a],s.col=r,g.push(s);return g}function o(t,e,n,r){var a,o,i,s,l,c,u,f,d=[],h=t.length;for(a=0;h>a;a++)o=t[a],i=o.start,s=e[a],s>n&&r>i&&(n>i?(l=v(n),u=!1):(l=i,u=!0),s>r?(c=v(r),f=!1):(c=s,f=!0),d.push({event:o,start:l,end:c,isStart:u,isEnd:f}));return d.sort(de)}function i(t){return t.end?v(t.end):d(v(t.start),y("defaultEventMinutes"))}function s(n,r){var a,o,i,s,u,f,d,h,v,g,p,m,b,D,M,C,S=n.length,T="",x=R(),H=y("isRTL");for(a=0;S>a;a++)o=n[a],i=o.event,s=L(o.start,o.start),u=L(o.start,o.end),f=A(o.col),d=Y(o.col),h=d-f,d-=.025*h,h=d-f,v=h*(o.forwardCoord-o.backwardCoord),y("slotEventOverlap")&&(v=Math.max(2*(v-10),v)),H?(p=d-o.backwardCoord*h,g=p-v):(g=f+o.backwardCoord*h,p=g+v),g=Math.max(g,f),p=Math.min(p,d),v=p-g,o.top=s,o.left=g,o.outerWidth=v,o.outerHeight=u-s,T+=l(i,o);for(x[0].innerHTML=T,m=x.children(),a=0;S>a;a++)o=n[a],i=o.event,b=t(m[a]),D=w("eventRender",i,i,b),D===!1?b.remove():(D&&D!==!0&&(b.remove(),b=t(D).css({position:"absolute",top:o.top,left:o.left}).appendTo(x)),o.element=b,i._id===r?c(i,b,o):b[0]._fci=a,V(i,b));
for(E(x,n,c),a=0;S>a;a++)o=n[a],(b=o.element)&&(o.vsides=z(b,!0),o.hsides=k(b,!0),M=b.find(".fc-event-title"),M.length&&(o.contentTop=M[0].offsetTop));for(a=0;S>a;a++)o=n[a],(b=o.element)&&(b[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",C=Math.max(0,o.outerHeight-o.vsides),b[0].style.height=C+"px",i=o.event,o.contentTop!==e&&10>C-o.contentTop&&(b.find("div.fc-event-time").text(ne(i.start,y("timeFormat"))+" - "+i.title),b.find("div.fc-event-title").remove()),w("eventAfterRender",i,i,b))}function l(t,e){var n="<",r=t.url,a=X(t,y),o=["fc-event","fc-event-vert"];return b(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+_(t.url)+"'":"div",n+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+e.top+"px;"+"left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+_(ae(t.start,t.end,y("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+_(t.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&D(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function c(t,e,n){var r=e.find("div.fc-event-time");b(t)&&h(t,e,r),n.isEnd&&D(t)&&g(t,e,r),C(t,e)}function f(t,e,n){function r(){l||(e.width(a).height("").draggable("option","grid",null),l=!0)}var a,o,i,s=n.isStart,l=!0,c=F(),f=P(),d=j(),h=B(),g=W();e.draggable({opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(n,g){w("eventDragStart",e,t,n,g),U(t,e),a=e.width(),c.start(function(n,a){if(K(),n){o=!1;var c=q(0,a.col),g=q(0,n.col);i=p(g,c),n.row?s?l&&(e.width(f-10),H(e,d*Math.round((t.end?(t.end-t.start)/Ae:y("defaultEventMinutes"))/h)),e.draggable("option","grid",[f,1]),l=!1):o=!0:(Q(u(v(t.start),i),u(S(t),i)),r()),o=o||l&&!i}else r(),o=!0;e.draggable("option","revert",o)},n,"drag")},stop:function(n,a){if(c.stop(),K(),w("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),G(t,e);else{var s=0;l||(s=Math.round((e.offset().top-J().offset().top)/d)*h+g-(60*t.start.getHours()+t.start.getMinutes())),Z(this,t,i,s,l,n,a)}}})}function h(t,e,n){function r(){K(),s&&(c?(n.hide(),e.draggable("option","grid",null),Q(u(v(t.start),b),u(S(t),b))):(a(D),n.css("display",""),e.draggable("option","grid",[E,x])))}function a(e){var r,a=d(v(t.start),e);t.end&&(r=d(v(t.end),e)),n.text(ae(a,r,y("timeFormat")))}var o,i,s,l,c,f,h,g,b,D,M,C=m.getCoordinateGrid(),T=I(),E=P(),x=j(),H=B();e.draggable({scroll:!1,grid:[E,x],axis:1==T?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(n,r){w("eventDragStart",e,t,n,r),U(t,e),C.build(),o=e.position(),i=C.cell(n.pageX,n.pageY),s=l=!0,c=f=O(i),h=g=0,b=0,D=M=0},drag:function(t,n){var a=C.cell(t.pageX,t.pageY);if(s=!!a){if(c=O(a),h=Math.round((n.position.left-o.left)/E),h!=g){var u=q(0,i.col),d=i.col+h;d=Math.max(0,d),d=Math.min(T-1,d);var v=q(0,d);b=p(v,u)}c||(D=Math.round((n.position.top-o.top)/x)*H)}(s!=l||c!=f||h!=g||D!=M)&&(r(),l=s,f=c,g=h,M=D),e.draggable("option","revert",!s)},stop:function(n,a){K(),w("eventDragStop",e,t,n,a),s&&(c||b||D)?Z(this,t,b,c?0:D,c,n,a):(s=!0,c=!1,h=0,b=0,D=0,r(),e.css("filter",""),e.css(o),G(t,e))}})}function g(t,e,n){var r,a,o=j(),i=B();e.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,U(t,e),w("eventResizeStart",this,t,n,o)},resize:function(s,l){r=Math.round((Math.max(o,e.height())-l.originalSize.height)/o),r!=a&&(n.text(ae(t.start,r||t.end?d(M(t),i*r):null,y("timeFormat"))),a=r)},stop:function(n,a){w("eventResizeStop",this,t,n,a),r?$(this,t,0,i*r,n,a):G(t,e)}})}var m=this;m.renderEvents=n,m.clearEvents=r,m.slotSegHtml=l,ye.call(m);var y=m.opt,w=m.trigger,b=m.isEventDraggable,D=m.isEventResizable,M=m.eventEnd,C=m.eventElementHandlers,T=m.setHeight,x=m.getDaySegmentContainer,R=m.getSlotSegmentContainer,F=m.getHoverListener,N=m.getMaxMinute,W=m.getMinMinute,L=m.timePosition,O=m.getIsCellAllDay,A=m.colContentLeft,Y=m.colContentRight,q=m.cellToDate,I=m.getColCnt,P=m.getColWidth,j=m.getSnapHeight,B=m.getSnapMinutes,J=m.getSlotContainer,V=m.reportEventElement,G=m.showEvents,U=m.hideEvents,Z=m.eventDrop,$=m.eventResize,Q=m.renderDayOverlay,K=m.clearOverlays,te=m.renderDayEvents,ee=m.calendar,ne=ee.formatDate,ae=ee.formatDates;m.draggableDayEvent=f}function re(t){var e,n=ae(t),r=n[0];if(oe(n),r){for(e=0;r.length>e;e++)ie(r[e]);for(e=0;r.length>e;e++)se(r[e],0,0)}return le(n)}function ae(t){var e,n,r,a=[];for(e=0;t.length>e;e++){for(n=t[e],r=0;a.length>r&&ce(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}function oe(t){var e,n,r,a,o;for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)for(a=n[r],a.forwardSegs=[],o=e+1;t.length>o;o++)ce(a,t[o],a.forwardSegs)}function ie(t){var n,r,a=t.forwardSegs,o=0;if(t.forwardPressure===e){for(n=0;a.length>n;n++)r=a[n],ie(r),o=Math.max(o,1+r.forwardPressure);t.forwardPressure=o}}function se(t,n,r){var a,o=t.forwardSegs;if(t.forwardCoord===e)for(o.length?(o.sort(fe),se(o[0],n+1,r),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-r)/(n+1),a=0;o.length>a;a++)se(o[a],0,t.forwardCoord)}function le(t){var e,n,r,a=[];for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)a.push(n[r]);return a}function ce(t,e,n){n=n||[];for(var r=0;e.length>r;r++)ue(t,e[r])&&n.push(e[r]);return n}function ue(t,e){return t.end>e.start&&t.start<e.end}function fe(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||de(t,e)}function de(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function he(t,e){function n(t,e){var n;if(e instanceof Array){n=[],e.forEach(function(t){n.push(v(t,!0))});var r=v(n[0],!0),c=v(n[n.length-1],!0);a.title=l(t,o("titleFormat")),a.start=a.visStart=r,a.end=a.visEnd=c}else if(null==a.days)if(null!=o("days")){n=o("days");var r=v(n[0],!0),c=v(n[n.length-1],!0);a.title=l(r,o("titleFormat")),a.start=a.visStart=r,a.end=a.visEnd=c}else{s(t,0>e?-1:1),a.title=l(t,o("titleFormat"));var r=v(t,!0),c=u(v(r),1);a.start=a.visStart=r,a.end=a.visEnd=c,n=[];var f=r.getTime();1>e&&(e=1);for(var d=0;e>d;d++)n.push(new Date(f+24*60*60*1e3*d))}else{n=[];for(var d=0;a.days.length>d;d++){var h=a.days[d],f=h.getTime();n.push(new Date(f+24*60*60*1e3*e))}var r=v(n[0],!0),c=v(n[n.length-1],!0);a.title=l(r,o("titleFormat")),a.start=a.visStart=r,a.end=a.visEnd=c}i(n)}function r(t){i(t)}var a=this;a.render=n,a.setDays=r,ge.call(a,t,e,"resourceMultiDay");var o=a.opt,i=a.renderResource,s=a.skipHiddenDays,l=e.formatDate}function ve(t,e){function n(t,e){e&&u(t,e),i(t,0>e?-1:1);var n=v(t,!0),l=u(v(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=l,o()}var r=this;r.render=n,ge.call(r,t,e,"resourceDay");var a=r.opt,o=r.renderResource,i=r.skipHiddenDays,s=e.formatDate}function ge(n,r,a){function o(t){null==t&&(t=[ce.start]),Hn=ce.resources=r.fetchResources(),(null==Hn||0==Hn.length)&&(Hn=[{name:"",id:""}]),ce.days=t,pn=Hn.length*t.length,i(),ke?c():l()}function i(){Mn=ue("theme")?"ui":"fc",Cn=ue("isRTL"),Sn=b(ue("minTime")),Tn=b(ue("maxTime")),En=ue("columnFormat"),cn=ue("colMinWidth");var e=ue("slotHeight");null!=e&&e!=dn&&null!=ke&&t("table.fc-agenda-slots tr",n).height(e),dn=e,kn=ue("weekNumbers"),Rn=ue("weekNumberTitle"),Fn="iso"!=ue("weekNumberCalculation")?"w":"W",hn=ue("snapMinutes")||ue("slotMinutes")}function s(e,n){var r=null===n?"null":n,a=moment(e).format("YYYY-MM-DD"),o=ke.find('tfoot th[data-resource-id="'+r+'" ][data-date="'+a+'"]');o.each(function(e,r){var a=t(r);a.html("&nbsp;"),fe("footerRender",a,n,a)})}function l(){var e,r,a,o,i,s=Mn+"-widget-header",l=Mn+"-widget-content",u=0==ue("slotMinutes")%15,h=f();for(Ee=t(h).appendTo(n),He&&He.remove(),He=t("<div style='width: 100%; float:left; overflow-x:hidden;'/>").appendTo(n),h=C(),Re=t(h).appendTo(n),c(),t("<div style='clear:both;'/>").appendTo(n),Be=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),ue("allDaySlot")?(e="<table style='width:0px;float:left;' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'><div class='fc-day-content' style='padding:0;'><div>"+ue("allDayText")+"</div></div></th>"+"</tr>"+"</table>",Je=t(e).appendTo(Be),Ve=t("<div style='width:100%; float:left; overflow-x:hidden;'/>").appendTo(Be),Xe=t("<div class='fc-event-container' style='position:relative;z-index:8;top:0;left:0'/>").appendTo(Ve),e="<table style='width:100%;' class='fc-agenda-allday' cellspacing='0'><tr><td><div class='fc-day-content'><div style='position:relative'/></div></td></tr></table>",Ge=t(e).appendTo(Ve),Ze=Ge.find("tr"),R(Ze.find("td")),e="<table style='width:0px;float:left;' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-gutter'><div class='fc-day-content' style='padding:0;'><div>&nbsp;</div></div></th>"+"</tr>"+"</table>",Ue=t(e).appendTo(Be),Be.append("<div class='fc-agenda-divider "+s+"' style='clear:both;'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):Xe=t([]),Qe=t("<div class='fc-axis-scroller' style='position:relative;width:0px;float:left;overflow-y:hidden'/>").appendTo(Be),e="<table class='fc-agenda-slots' style='width:0px;float:left;' cellspacing='0'><tbody>",r=g(),o=d(v(r),Tn),d(r,Sn),mn=0,a=0;o>r;a++)i=r.getMinutes(),e+="<tr class='fc-slot"+a+" "+(i?"fc-minor":"")+"'"+(null!=dn?" style='height:"+dn+"px'":"")+">"+"<th class='fc-agenda-axis "+s+"'>"+"<div style='position:relative;'>"+(u&&i?"&nbsp;":De(r,ue("axisFormat")))+"</div>"+"</th>"+"</tr>",d(r,ue("slotMinutes")),mn++;for(e+="</tbody></table>",$e=t(e).appendTo(Qe),Ke=t("<div style='position:relative;width:100%;float:left;overflow-x:auto;overflow-y:auto'/>").appendTo(Be),t("<div style='clear:both;'/>").appendTo(Be),tn=t("<div style='position:relative;width:100%'/>").appendTo(Ke),en=t("<div class='fc-highlight-container' style='position:absolute;z-index:-1;top:0;left:0'/>").appendTo(tn),nn=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(tn),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=g(),o=d(v(r),Tn),d(r,Sn),mn=0,a=0;o>r;a++)i=r.getMinutes(),e+="<tr class='fc-slot"+a+" "+(i?"fc-minor":"")+"'"+(null!=dn?" style='height:"+dn+"px'":"")+">"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",d(r,ue("slotMinutes")),mn++;e+="</tbody></table>",rn=t(e).appendTo(tn),F(rn.find("td")),Ke.scroll(function(){He.scrollLeft(Ke.scrollLeft()),Qe.scrollTop(Ke.scrollTop()),Ve&&Ve.scrollLeft(Ke.scrollLeft())}),Ve&&Ve.scroll(function(){Ke.scrollLeft(Ve.scrollLeft()),He.scrollLeft(Ve.scrollLeft())})}function c(){var e=y();ke&&ke.remove(),ke=t(e).appendTo(He),Fe=ke.find("thead"),Ne=Fe.find("tr:eq(0) th"),ze=ke.find("thead tr:eq(1)"),Le=ze.find("th"),Oe=ke.find("tfoot"),Ae=Oe.find("tr:eq(0) td"),Ye=ke.find("tbody"),qe=Ye.find("td"),Ie=qe.find("> div"),Pe=qe.find(".fc-day-content > div"),_e=qe.eq(0),je=Ie.eq(0),B(Fe.add(Fe)),B(Fe.add(Fe.find("tr:eq(0)"))),B(ze.add(ze)),B(Ye.add(Ye.find("tr")));var n=ke.find("th[data-date]:not([data-resource-id])");n.each(function(e,n){var r=t.attr(n,"data-date"),a=t(n);fe("dayRender",a,moment(r).toDate(),a)});var r=ke.find("thead th[data-resource-id]");r.each(function(e,n){var r=t.attr(n,"data-resource-id");"null"===r&&(r=null);var a=t(n);fe("resourceRender",a,r,a)});var a=ke.find("tfoot th[data-resource-id]");a.each(function(e,n){var r=t.attr(n,"data-resource-id");"null"===r&&(r=null);var a=t(n);fe("footerRender",a,r,a)})}function f(){var t="<table style='width:100%; float:left;' class='fc-agenda-days fc-agenda-days-axis fc-border-separate' cellspacing='0'>"+p()+m()+"</table>";return t}function p(){var t,e,n=Mn+"-widget-header",r="";return r+="<thead><tr>",kn?(t=Z(0,0),e=De(t,Fn),Cn?e+=Rn:e=Rn+e,r+="<th class='fc-agenda-axis fc-week-number "+n+"'>"+_(e)+"</th>"):r+="<th class='fc-agenda-axis "+n+"'>&nbsp;</th>",r+="</tr></thead>"}function m(){var t=Mn+"-widget-header",e="";return e+="<tbody><tr><th class='fc-agenda-axis "+t+"'>&nbsp;</th>",e+="</tr></tbody>"}function y(){var t=ue("showFooter"),e="<table style='width:100%;position:relative;' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+w()+D()+(t?M():"")+"</table>";return e}function w(){var t,e,n=Mn+"-widget-header",r=moment(h(new Date)),a="";a+="<thead><tr>";for(var o=Math.ceil(pn/Hn.length),i=0;o>i;i++){var e=i*Hn.length;t=Z(0,e),a+="<th class='fc-"+We[t.getDay()]+" fc-col"+e+" "+n+(r.isSame(t,"day")?" fc-col-today":"")+"' colspan="+Hn.length+" data-date='"+moment(t).format("YYYY-MM-DD")+"' >"+_(De(t,En))+"</th>"}a+="</tr><tr>";for(var e=0;pn>e;e++){var s=Hn[e%Hn.length];t=Z(0,e),a+="<th class='fc-"+We[t.getDay()]+" fc-col"+e+" "+n+"'"+(cn?"style='min-width:"+cn+"px;'":"")+" data-date='"+moment(t).format("YYYY-MM-DD")+"' data-resource-id='"+s.id+"' >"+(""==s.name?"&nbsp;":_(s.name))+"</th>"}return a+="</tr></thead>"}function D(){var t,e,n,r,a,o=Mn+"-widget-content",i=h(new Date),s="";for(s+="<tbody><tr>",n="",e=0;pn>e;e++)t=Z(0,e),a=["fc-col"+e,"fc-"+We[t.getDay()],o],+t==+i?a.push(Mn+"-state-highlight","fc-today"):i>t?a.push("fc-past"):a.push("fc-future"),r="<td class='"+a.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",n+=r;return s+=n,s+="</tr></tbody>"}function M(){var t,e=Mn+"-widget-header";moment(h(new Date));var n,r="";r+="<tfoot><tr>";for(var n=0;pn>n;n++){var a=Hn[n%Hn.length];t=Z(0,n),r+="<th class='fc-"+We[t.getDay()]+" fc-col"+n+" "+e+"'"+(cn?"style='min-width:"+cn+"px;'":"")+" data-date='"+moment(t).format("YYYY-MM-DD")+"' data-resource-id='"+a.id+"' >"+"&nbsp;"+"</th>"}return r+="</tr></tfoot>"}function C(){var t=Mn+"-widget-header",e="<table style='width:100%; float:left;' class='fc-agenda-days fc-agenda-days-axis fc-border-separate' cellspacing='0'>";return e+="<thead><tr><th class='fc-agenda-gutter "+t+"'>&nbsp;</th>"+"</tr>"+"<tr>"+"<th class='fc-agenda-gutter "+t+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function S(t){t===e&&(t=sn),sn=t,xn={};var n=Ye.position().top,r=Ke.position().top,a=Math.min(t-n,rn.height()+r+1),o=Oe.height();je.height(a-z(_e)-o),Be.css("top",n);var i=Ke[0].clientHeight,s=Ke.height()-i;Qe.height(a-r-1-s-o),Ke.height(a-r-1-o),null==dn&&(dn=rn.find("tr:first").height()+1),vn=ue("slotMinutes")/hn,gn=dn/vn}function T(e){on=e,bn.clear(),Dn.clear();var n=$e.find("th:first");Je&&(n=n.add(Je.find("th:first"))),ln=0,x(n.width("").each(function(e,n){ln=Math.max(ln,t(n).outerWidth())}),ln);var r=ke.find(".fc-agenda-gutter");Ge&&(r=r.add(Ge.find("th.fc-agenda-gutter")));var a=Ke[0].clientWidth;fn=Ke.width()-a,fn?(x(r,fn),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),un=Math.floor(a/pn),cn&&cn>un&&(un=cn),x(Le.slice(0,-1),un),Qe.width(ln),Ee.width(ln),$e.width(ln),He.width(on-ln-fn),Ke.width(on-ln),Re.width(fn);var o=un*pn;ke.width(o),Ge&&Ge.width(o),Xe&&Xe.width(o),Ve&&Ve.width(on-ln-fn),Je&&Je.width(ln),Ue&&Ue.width(fn);var i=o;tn.width(i)}function E(){function t(){Qe.scrollTop(r),Ke.scrollTop(r)}if(rn){var e=g(),n=v(e);n.setHours(ue("firstHour"));var r=$(e,n)+1;t(),setTimeout(t,0)}}function k(){}function R(t){t.click(N).mousedown(oe)}function F(t){t.click(N).mousedown(ae)}function N(t){if(!ue("selectable")){var e=Math.min(pn-1,Math.floor((t.pageX-ke.offset().left-ln)/un)),n=Z(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*ue("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+Sn),fe("dayClick",qe[e],n,!1,t)}else fe("dayClick",qe[e],n,!0,t)}}function W(t,e,n){n&&yn.build();for(var r=be(t,e),a=0;r.length>a;a++){var o=r[a];R(L(o.row,o.leftCol,o.row,o.rightCol))}}function L(t,e,n,r){var a=yn.rect(t,e,n,r,Be);return de(a,Be)}function O(t,e){for(var n=0;pn>n;n++){var r=Z(0,n),a=u(v(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(i>o){var s=yn.rect(0,n,0,n,tn),l=$(r,o),c=$(r,i);s.top=l,s.height=c-l,F(de(s,tn))}}}function A(t){return bn.left(t)}function q(t){return Dn.left(t)}function I(t){return bn.right(t)}function P(t){return Dn.right(t)}function X(t){return ue("allDaySlot")&&!t.row}function J(t){var e=Z(0,t.col),n=t.row;return ue("allDaySlot")&&n--,n>=0&&d(e,Sn+n*hn),e}function V(t,e){for(var n=0,r=0;ce.days.length>r;r++)if(moment(ce.days[r]).isSame(t,"day")){n=r;break}for(var a=-1,r=0;Hn.length>r;r++)e.id===Hn[r].id&&(a=r);return-1===a?-1:n*Hn.length+a}function G(t){return Hn[t%Hn.length]}function U(t){var e=Math.floor(t/Hn.length);e>ce.days.length-1&&(e=ce.days.length-1);var n=v(ce.days[e]);return n}function Z(t,e){return U(e)}function $(t,n){if(t=v(t,!0),d(v(t),Sn)>n)return 0;if(n>=d(v(t),Tn))return rn.height();var r=ue("slotMinutes"),a=60*n.getHours()+n.getMinutes()-Sn,o=Math.floor(a/r),i=xn[o];return i===e&&(i=xn[o]=rn.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+dn*(a%r/r)))}function Q(t){return 0===t&&Je?Je.find("tr"):Ze}function K(t){var e=v(t.start);return t.allDay?e:d(e,ue("defaultEventMinutes"))}function te(t,e){return e?v(t):d(v(t),ue("slotMinutes"))}function ee(t,e,n,r){n?ue("allDaySlot")&&W(t,u(v(e),1),!0,r):ne(t,e,r)}function ne(e,n,r){var a=ue("selectHelper");if(yn.build(),a){var o=V(e,r);if(o>=0&&pn>o){var i=yn.rect(0,o,0,o,tn),s=$(e,e),l=$(e,n);if(l>s){if(i.top=s,i.height=l-s,i.left+=2,i.width-=5,t.isFunction(a)){var c=a(e,n);c&&(i.position="absolute",an=t(c).css(i).appendTo(tn))}else i.isStart=!0,i.isEnd=!0,an=t(ye({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},i)),an.css("opacity",ue("dragOpacity"));an&&(F(an),tn.append(an),x(an,i.width,!0),H(an,i.height,!0))}}}else O(e,n)}function re(){he(),an&&(an.remove(),an=null)}function ae(e){if(1==e.which&&ue("selectable")){ge(e);var n,r,a;wn.start(function(t,e){if(re(),t&&t.col==e.col&&!X(t)){a=Hn[t.col%Hn.length];var o=J(e),i=n=J(t);r=[o,d(v(o),hn),i,d(v(i),hn)].sort(Y),ue("hideSelection")||ne(r[0],r[3],a)}else r=null},e),t(document).one("mouseup",function(t){wn.stop(),r&&(+r[0]==+r[1]&&ie(r[0],!1,t),ve(r[0],r[3],!1,t,a.id,n))})}}function oe(e){if(1==e.which&&ue("selectable")){ge(e);var n,r;wn.start(function(t,e){if(re(),t&&X(t)){r=Hn[t.col%Hn.length];var a=J(e),o=J(t);n=[a,o].sort(Y),ue("hideSelection")||ee(n[0],n[1],!0,r)}else n=null},e),t(document).one("mouseup",function(t){wn.stop(),n&&(+n[0]==+n[1]&&ie(n[0],!0,t),ve(n[0],n[1],!0,t,r.id))})}}function ie(t,e,n){fe("dayClick",qe[we(t).col],t,e,n)}function se(t,e){wn.start(function(t){if(he(),t)if(X(t))L(t.row,t.col,t.row,t.col);else{var e=J(t),n=d(v(e),ue("defaultEventMinutes"));O(e,n)}},e)}function le(t,e,n){var r=wn.stop();he(),r&&fe("drop",t,J(r),X(r),e,n)}var ce=this;ce.renderResource=o,ce.rerenderFooter=s,ce.setWidth=T,ce.setHeight=S,ce.afterRender=k,ce.defaultEventEnd=K,ce.timePosition=$,ce.getIsCellAllDay=X,ce.allDayRow=Q,ce.getCoordinateGrid=function(){return yn},ce.getHoverListener=function(){return wn},ce.colLeft=A,ce.colRight=I,ce.colContentLeft=q,ce.colContentRight=P,ce.getDaySegmentContainer=function(){return Xe},ce.getHighlightSegmentContainer=function(){return en},ce.getSlotSegmentContainer=function(){return nn},ce.getMinMinute=function(){return Sn},ce.getMaxMinute=function(){return Tn},ce.getSlotContainer=function(){return tn},ce.getRowCnt=function(){return Je?2:1},ce.getColCnt=function(){return pn},ce.getColWidth=function(){return un},ce.getSnapHeight=function(){return gn},ce.getSnapMinutes=function(){return hn},ce.defaultSelectionEnd=te,ce.renderDayOverlay=W,ce.renderSelection=ee,ce.clearSelection=re,ce.reportDayClick=ie,ce.dragStart=se,ce.dragStop=le,ce.colToResource=G,ce.resetScroll=E,ce.resources=r.fetchResources(),me.call(ce,n,r,a),ce.cellToDate=Z,Ce.call(ce),Me.call(ce),pe.call(ce);var ue=ce.opt,fe=ce.trigger,de=ce.renderOverlay,he=ce.clearOverlays,ve=ce.reportSelection,ge=ce.unselect,ye=ce.slotSegHtml,Z=ce.cellToDate,we=ce.dateToCell,be=ce.rangeToSegments,De=r.formatDate;ce.renderHighlights;var Ee,He,ke,Re,Fe,Ne,ze,Le,Oe,Ae,Ye,qe,Ie,Pe,_e,je,Be,Xe,Je,Ve,Ge,Ue,Ze,$e,Qe,Ke,tn,en,nn,rn,an,on,sn,ln,cn,un,fn,dn,hn,vn,gn,pn,mn,yn,wn,bn,Dn,Mn,Cn,Sn,Tn,En,xn={},Hn=ce.resources;ce.highlights;var kn,Rn,Fn;j(n.addClass("fc-agenda")),yn=new Se(function(e,n){function r(t){return Math.max(l,Math.min(c,t))}var a,o,i;Le.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),ue("allDaySlot")&&(a=Ze,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=tn.offset().top,l=Ke.offset().top,c=l+Ke.outerHeight(),u=0;mn*vn>u;u++)e.push([r(s+gn*u),r(s+gn*(u+1))])}),wn=new Te(yn),bn=new xe(function(t){return Ie.eq(t)}),Dn=new xe(function(t){return Pe.eq(t)})}function pe(){function n(t,e,n,r,a,o,i,s){var l=e.allDay,c=e._id,u=we(c),f=e.resourceId;u&&u.forEach(function(t){be(t.start,t.resourceId),t.resourceId=s}),me(we(c),n,r,a),u=we(c),u&&u.forEach(function(t){be(t.start,t.resourceId)}),W("eventDrop",t,e,n,r,a,function(){var t=we(c);t&&t.forEach(function(t){be(t.start,t.resourceId),t.resourceId=f}),me(we(c),-n,-r,l),t=we(c),t&&t.forEach(function(t){be(t.start,t.resourceId)}),Ce(c)},o,i,f),Ce(c)}function r(t,e){var n,r=t.length,a=[],i=[];for(n=0;r>n;n++)t[n].allDay?a.push(t[n]):i.push(t[n]);N("allDaySlot")&&(ve(s(a),e,F.resources),q()),y(l(i),e);var c=F.highlights=ge.fetchHighlights();o(c)}function a(){I().empty(),P().empty(),i()}function o(t){M(c(t))}function i(){j().empty()}function s(e){var n,r,a,o,i,s,l=ee(),c=[];for(a=0;l>a;a++){n=te(0,a);var d=pe(a),h=f(d,e);for(r=t.map(h,m),s=g(h,r,n,u(v(n),1)),s=re(s),o=0;s.length>o;o++)i=s[o],i.row=0,i.leftCol=a,i.rightCol=a,i.isStart=!0,i.isEnd=!0,c.push(i)}return c}function l(e){var n,r,a,o,i,s,l=ee(),c=V(),u=J(),h=[];for(a=0;l>a;a++){n=te(0,a),d(n,c);var p=pe(a),y=f(p,e);for(r=t.map(y,m),s=g(y,r,n,d(v(n),u-c)),s=re(s),o=0;s.length>o;o++)i=s[o],i.col=a,h.push(i)}return h}function c(e){var n,r,a,o,i,s,l=ee(),c=V(),u=J(),f=[];for(a=0;l>a;a++){n=te(0,a),d(n,c);var p=pe(a),y=h(p,e);for(r=t.map(y,m),s=g(y,r,n,d(v(n),u-c)),s=re(s),o=0;s.length>o;o++)i=s[o],i.col=a,f.push(i)}return f}function f(t,e){for(var n=[],r=0;e.length>r;r++)e[r].resourceId===t.id&&n.push(e[r]);return n}function h(t,e){for(var n=[],r=0;e.length>r;r++)e[r].resourceId===t.id&&n.push(e[r]);return n}function g(t,e,n,r){var a,o,i,s,l,c,u,f,d=[],h=t.length;for(a=0;h>a;a++)o=t[a],i=o.start,s=e[a],s>n&&r>i&&(n>i?(l=v(n),u=!1):(l=i,u=!0),s>r?(c=v(r),f=!1):(c=s,f=!0),d.push({event:o,start:l,end:c,isStart:u,isEnd:f}));return d.sort(de)}function m(t){return t.end?v(t.end):d(v(t.start),N("defaultEventMinutes"))}function y(n,r){var a,o,i,s,l,c,u,f,d,h,v,g,p,m,y,D,M=n.length,C="",S=P(),T=N("isRTL");for(a=0;M>a;a++)o=n[a],i=o.event,s=G(o.start,o.start),l=G(o.start,o.end),c=Q(o.col),u=K(o.col),f=u-c,u-=.025*f,f=u-c,d=f*(o.forwardCoord-o.backwardCoord),N("slotEventOverlap")&&(d=Math.max(2*(d-10),d)),T?(v=u-o.backwardCoord*f,h=v-d):(h=c+o.backwardCoord*f,v=h+d),h=Math.max(h,c),v=Math.min(v,u),d=v-h,o.top=s,o.left=h,o.outerWidth=d,o.outerHeight=l-s,C+=w(i,o);for(S[0].innerHTML=C,g=S.children(),a=0;M>a;a++)o=n[a],i=o.event,p=t(g[a]),m=W("eventRender",i,i,p),m===!1?p.remove():(m&&m!==!0&&(p.remove(),p=t(m).css({position:"absolute",top:o.top,left:o.left}).appendTo(S)),o.element=p,i._id===r?b(i,p,o):p[0]._fci=a,se(i,p));for(E(S,n,b),a=0;M>a;a++)o=n[a],(p=o.element)&&(o.vsides=z(p,!0),o.hsides=k(p,!0),y=p.find(".fc-event-title"),y.length&&(o.contentTop=y[0].offsetTop));for(a=0;M>a;a++)o=n[a],(p=o.element)&&(p[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",D=Math.max(0,o.outerHeight-o.vsides),p[0].style.height=D+"px",i=o.event,o.contentTop!==e&&10>D-o.contentTop&&(p.find("div.fc-event-time").text(De(i.start,N("timeFormat"))+" - "+i.title),p.find("div.fc-event-title").remove()),W("eventAfterRender",i,i,p))}function w(t,e){var n="<",r=t.url,a=X(t,N),o=["fc-event","fc-event-vert"];return L(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+_(t.url)+"'":"div",n+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+e.top+"px;"+"left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+_(Me(t.start,t.end,N("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+_(t.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&O(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function b(t,e,n){var r=e.find("div.fc-event-time");L(t)&&x(t,e,r),n.isEnd&&O(t)&&R(t,e,r),Y(t,e)}function D(t,e){Y(t,e)}function M(e){var n,r,a,o,i,s,l,c,u,f,d,h,v=e.length,g="",p=j();for(n=0;v>n;n++)r=e[n],a=r.event,o=G(r.start,r.start),i=G(r.start,r.end),l=Z(r.col),c=$(r.col),s=c-l,r.top=o,r.left=l,r.outerWidth=s,r.outerHeight=i-o,g+=C(a,r);for(p[0].innerHTML=g,u=p.children(),n=0;v>n;n++)r=e[n],a=r.event,f=t(u[n]),d=W("highlightRender",a,a,f),d===!1?f.remove():(d&&d!==!0&&(f.remove(),f=t(d).css({position:"absolute",top:r.top,left:r.left}).appendTo(p)),r.element=f,f[0]._fci=n);for(E(p,e,D),n=0;v>n;n++)r=e[n],(f=r.element)&&(r.vsides=z(f,!0),r.hsides=k(f,!0));for(n=0;v>n;n++)r=e[n],(f=r.element)&&(f[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",h=Math.max(0,r.outerHeight-r.vsides),f[0].style.height=h+"px",a=r.event,W("highlightAfterRender",a,a,f))}function C(t,n){var r="<",a=X(t,N),o=["fc-highlight","fc-highlight-vert"];n.isStart&&o.push("fc-highlight-start"),n.isEnd&&o.push("fc-highlight-end"),n.event.class&&o.push(n.event.class);var i=n.event.style!==e?n.event.style:"";return o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),r+="div class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+n.top+"px;"+"left:"+n.left+"px;"+a+i+"'"+">"+"</div>"}function T(t,e,r){function a(){c||(e.width(o).height("").draggable("option","grid",null),c=!0)}var o,i,s,l=r.isStart,c=!0,f=B(),d=ne(),h=ae(),g=oe(),m=V();e.draggable({scroll:!0,opacity:N("dragOpacity","month"),revertDuration:N("dragRevertDuration"),start:function(n,r){W("eventDragStart",e,t,n,r),ce(t,e),o=e.width(),f.start(function(n,r){if(he(),n){var o=r.col%F.resources.length,f=n.col%F.resources.length,m=te(0,r.col),y=te(0,n.col);s=p(y,m),n.row?l&&c&&(e.width(d-10),H(e,h*Math.round((t.end?(t.end-t.start)/Ae:N("defaultEventMinutes"))/g)),e.draggable("option","grid",[d,1]),c=!1):(fe(u(v(t.start),s),u(S(t),s),!0,pe(n.col)),a()),i=c&&!s&&f==o}else a(),i=!0;e.draggable("option","revert",i)},n,"drag")},stop:function(r,o){if(he(),W("eventDragStop",e,t,r,o),i)a(),e.css("filter",""),le(t,e),W("eventDragCancel",e,t,r,o);else{var l=0;c||(l=Math.round((e.offset().top-ie().offset().top)/h)*g+m-(60*t.start.getHours()+t.start.getMinutes()));var u=null,d=f.stop();u=resources[d.col%F.resources.length].id,n(this,t,s,l,c,r,o,u)}}})}function x(t,e,r){function a(){he(),c&&(h?(r.hide(),e.draggable("option","grid",null),fe(u(v(t.start),w),u(S(t),w))):(o(b),r.css("display",""),e.draggable("option","grid",[E,x])))}function o(e){var n,a=d(v(t.start),e);t.end&&(n=d(v(t.end),e)),r.text(Me(a,n,N("timeFormat")))}var i,s,l,c,f,h,g,m,y,w,b,D,M,C=F.getCoordinateGrid(),T=ee(),E=ne(),x=ae(),H=oe();e.draggable({scroll:!0,containment:ie(),grid:[E,x],axis:1==T?"y":!1,opacity:N("dragOpacity"),revertDuration:N("dragRevertDuration"),start:function(n,r){if(x){var a=r.position.top;r.position.top=Math.floor(r.position.top/x)*x,l=(r.position.top-a)/x*H}else l=0;W("eventDragStart",e,t,n,r),ce(t,e),C.build(),i={left:r.position.left,top:r.position.top},s=C.cell(n.pageX,n.pageY),c=f=!0,h=g=U(s),m=y=0,w=0,b=D=0,M=s.col%F.resources.length},drag:function(t,n){var r=C.cell(t.pageX,t.pageY);if(c=!!r){if(h=U(r),m=Math.round((n.position.left-i.left)/E),m!=y){var o=te(0,s.col),u=s.col+m;u=Math.max(0,u),u=Math.min(T-1,u);var d=te(0,u);w=p(d,o),M=u%F.resources.length}h||(n.position.top=Math.floor(n.position.top/x)*x,b=Math.round((n.position.top-i.top)/x)*H+l)}(c!=f||h!=g||m!=y||b!=D)&&(a(),f=c,g=h,y=m,D=b),e.draggable("option","revert",!c)},stop:function(r,o){he(),W("eventDragStop",e,t,r,o);var s=F.resources[M].id;c&&(h||w||b||s!=t.resourceId)?n(this,t,w,h?0:b,h,r,o,s):(c=!0,h=!1,m=0,w=0,b=0,M=null,a(),e.css("filter",""),e.css(i),le(t,e),W("eventDragCancel",e,t,r,o))}})}function R(t,e,n){var r,a,o=ae(),i=oe();e.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,ce(t,e),W("eventResizeStart",this,t,n,o)},resize:function(s,l){r=Math.round((Math.max(o,e.height())-l.originalSize.height)/o),r!=a&&(n.text(Me(t.start,r||t.end?d(A(t),i*r):null,N("timeFormat"))),a=r)},stop:function(n,a){W("eventResizeStop",this,t,n,a),r?ue(this,t,0,i*r,n,a):le(t,e)}})}var F=this;F.renderEvents=r,F.clearEvents=a,F.slotSegHtml=w,F.renderHighlights=o,F.clearHighlights=i,ye.call(F);var N=F.opt,W=F.trigger,L=F.isEventDraggable,O=F.isEventResizable,A=F.eventEnd,Y=F.eventElementHandlers,q=F.setHeight,I=F.getDaySegmentContainer,P=F.getSlotSegmentContainer,j=F.getHighlightSegmentContainer,B=F.getHoverListener,J=F.getMaxMinute,V=F.getMinMinute,G=F.timePosition,U=F.getIsCellAllDay,Z=F.colLeft,$=F.colRight,Q=F.colContentLeft,K=F.colContentRight,te=F.cellToDate,ee=F.getColCnt,ne=F.getColWidth,ae=F.getSnapHeight,oe=F.getSnapMinutes,ie=F.getSlotContainer,se=F.reportEventElement,le=F.showEvents,ce=F.hideEvents,ue=F.eventResize,fe=F.renderDayOverlay,he=F.clearOverlays,ve=F.renderDayEvents,ge=F.calendar,pe=F.colToResource,me=F.moveEvents,we=F.getEventsById,be=F.rerenderFooter;F.draggableDayEvent=T,F.eventDrop=n;var De=ge.formatDate,Me=ge.formatDates,Ce=ge.reportEventChange}function re(t){var e,n=ae(t),r=n[0];if(oe(n),r){for(e=0;r.length>e;e++)ie(r[e]);for(e=0;r.length>e;e++)se(r[e],0,0)}return le(n)}function ae(t){var e,n,r,a=[];for(e=0;t.length>e;e++){for(n=t[e],r=0;a.length>r&&ce(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}function oe(t){var e,n,r,a,o;for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)for(a=n[r],a.forwardSegs=[],o=e+1;t.length>o;o++)ce(a,t[o],a.forwardSegs)}function ie(t){var n,r,a=t.forwardSegs,o=0;if(t.forwardPressure===e){for(n=0;a.length>n;n++)r=a[n],ie(r),o=Math.max(o,1+r.forwardPressure);t.forwardPressure=o}}function se(t,n,r){var a,o=t.forwardSegs;if(t.forwardCoord===e)for(o.length?(o.sort(fe),se(o[0],n+1,r),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-r)/(n+1),a=0;o.length>a;a++)se(o[a],0,t.forwardCoord)}function le(t){var e,n,r,a=[];for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)a.push(n[r]);return a}function ce(t,e,n){n=n||[];for(var r=0;e.length>r;r++)ue(t,e[r])&&n.push(e[r]);return n}function ue(t,e){return t.end>e.start&&t.start<e.end}function fe(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||de(t,e)}function de(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function me(n,r,a){function o(t){return B[t]}function i(e,n){var r=G[e];return t.isPlainObject(r)?P(r,n||a):r}function s(t,e){return r.trigger.apply(r,[t,e||q].concat(Array.prototype.slice.call(arguments,2),[q]))}function l(t){var e=t.source||{};return V(t.startEditable,e.startEditable,i("eventStartEditable"),t.editable,e.editable,i("editable"))&&!i("disableDragging")}function c(t){var e=t.source||{};return V(t.durationEditable,e.durationEditable,i("eventDurationEditable"),t.editable,e.editable,i("editable"))&&!i("disableResizing")}function f(t){B={};var e,n,r=t.length;for(e=0;r>e;e++)n=t[e],B[n._id]?B[n._id].push(n):B[n._id]=[n]}function h(){B={},X={},J=[]}function g(t){return t.end?v(t.end):I(t)}function m(t,e){J.push({event:t,element:e}),X[t._id]?X[t._id].push(e):X[t._id]=[e]}function y(){t.each(J,function(t,e){q.trigger("eventDestroy",e.event,e.event,e.element)})}function w(t,n){n.click(function(r){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?e:s("eventClick",this,t,r)}).hover(function(e){s("eventMouseover",this,t,e)},function(e){s("eventMouseout",this,t,e)})}function b(t,e){M(t,e,"show")}function D(t,e){M(t,e,"hide")
}function M(t,e,n){var r,a=X[t._id],o=a.length;for(r=0;o>r;r++)e&&a[r][0]==e[0]||a[r][n]()}function C(t,e,n,r,a,o,i){var l=e.allDay,c=e._id;T(B[c],n,r,a),s("eventDrop",t,e,n,r,a,function(){T(B[c],-n,-r,l),j(c)},o,i),j(c)}function S(t,e,n,r,a,o){var i=e._id;E(B[i],n,r),s("eventResize",t,e,n,r,function(){E(B[i],-n,-r),j(i)},a,o),j(i)}function T(t,n,r,a){r=r||0;for(var o,i=t.length,s=0;i>s;s++)o=t[s],a!==e&&(o.allDay=a),d(u(o.start,n,!0),r),o.end&&(o.end=d(u(o.end,n,!0),r)),_(o,G)}function E(t,e,n){n=n||0;for(var r,a=t.length,o=0;a>o;o++)r=t[o],r.end=d(u(g(r),e,!0),n),_(r,G)}function x(t){return"object"==typeof t&&(t=t.getDay()),$[t]}function H(){return U}function k(t,e,n){for(e=e||1;$[(t.getDay()+(n?e:0)+7)%7];)u(t,e)}function R(){var t=F.apply(null,arguments),e=N(t),n=z(e);return n}function F(t,e){var n=q.getColCnt(),r=te?-1:1,a=te?n-1:0;"object"==typeof t&&(e=t.col,t=t.row);var o=t*n+(e*r+a);return o}function N(t){var e=q.visStart.getDay();return t+=Q[e],7*Math.floor(t/U)+K[(t%U+U)%U]-e}function z(t){var e=v(q.visStart);return u(e,t),e}function W(t){var e=L(t),n=O(e),r=A(n);return r}function L(t){return p(t,q.visStart)}function O(t){var e=q.visStart.getDay();return t+=e,Math.floor(t/7)*U+Q[(t%7+7)%7]-Q[e]}function A(t){var e=q.getColCnt(),n=te?-1:1,r=te?e-1:0,a=Math.floor(t/e),o=(t%e+e)%e*n+r;return{row:a,col:o}}function Y(t,e){for(var n=q.getRowCnt(),r=q.getColCnt(),a=[],o=L(t),i=L(e),s=O(o),l=O(i)-1,c=0;n>c;c++){var u=c*r,f=u+r-1,d=Math.max(s,u),h=Math.min(l,f);if(h>=d){var v=A(d),g=A(h),p=[v.col,g.col].sort(),m=N(d)==o,y=N(h)+1==i;a.push({row:c,leftCol:p[0],rightCol:p[1],isStart:m,isEnd:y})}}return a}var q=this;q.element=n,q.calendar=r,q.name=a,q.opt=i,q.trigger=s,q.isEventDraggable=l,q.isEventResizable=c,q.setEventData=f,q.clearEventData=h,q.eventEnd=g,q.reportEventElement=m,q.triggerEventDestroy=y,q.eventElementHandlers=w,q.showEvents=b,q.hideEvents=D,q.eventDrop=C,q.moveEvents=T,q.eventResize=S,q.getEventsById=o;var I=q.defaultEventEnd,_=r.normalizeEvent,j=r.reportEventChange,B={},X={},J=[],G=r.options;q.isHiddenDay=x,q.skipHiddenDays=k,q.getCellsPerWeek=H,q.dateToCell=W,q.dateToDayOffset=L,q.dayOffsetToCellOffset=O,q.cellOffsetToCell=A,q.cellToDate=R,q.cellToCellOffset=F,q.cellOffsetToDayOffset=N,q.dayOffsetToDate=z,q.rangeToSegments=Y;var U,Z=i("hiddenDays")||[],$=[],Q=[],K=[],te=i("isRTL");(function(){i("weekends")===!1&&Z.push(0,6);for(var e=0,n=0;7>e;e++)Q[e]=n,$[e]=-1!=t.inArray(e,Z),$[e]||(K[n]=e,n++);if(U=n,!U)throw"invalid hiddenDays"})()}function ye(){function e(t,e){var n=r(t,!1,!0);be(n,function(t,e){N(t.event,e)}),w(n,e),be(n,function(t,e){x("eventAfterRender",t.event,t.event,e)})}function n(t,e,n){var a=r([t],!0,!1),o=[];return be(a,function(t,r){t.row===e&&r.css("top",n),o.push(r[0])}),o}function r(e,n,r){var o,l,u=U(),d=n?t("<div/>"):u,h=null!=e[0]&&null!=e[0].event?e:a(e);return i(h),o=s(h),d[0].innerHTML=o,l=d.children(),n&&u.append(l),c(h,l),be(h,function(t,e){t.hsides=k(e,!0)}),be(h,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),be(h,function(t,e){t.outerHeight=e.outerHeight(!0)}),f(h,r),h}function a(t){for(var e=[],n=0;t.length>n;n++){var r=o(t[n]);e.push.apply(e,r)}return e}function o(t){for(var e=t.start,n=S(t),r=ee(e,n),a=0;r.length>a;a++)r[a].event=t;return r}function i(t){for(var e=T("isRTL"),n=0;t.length>n;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?V:B,o=(e?r.isStart:r.isEnd)?G:J,i=a(r.leftCol),s=o(r.rightCol);r.left=i,r.outerWidth=s-i}}function s(t){for(var e="",n=0;t.length>n;n++)e+=l(t[n]);return e}function l(t){var e="",n=T("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];H(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=X(r,T);return e+=a?"<a href='"+_(a)+"'":"<div",e+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+t.left+"px;"+i+"'"+">"+"<div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+_(Z(r.start,r.end,T("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+_(r.title||"")+"</span>"+"</div>",t.isEnd&&R(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),e+="</"+(a?"a":"div")+">"}function c(e,n){for(var r=0;e.length>r;r++){var a=e[r],o=a.event,i=n.eq(r),s=x("eventRender",o,o,i);s===!1?i.remove():(s&&s!==!0&&(s=t(s).css({position:"absolute",left:a.left}),i.replaceWith(s),i=s),a.element=i)}}function f(t,e){var n=d(t),r=y(),a=[];if(e)for(var o=0;r.length>o;o++)r[o].height(n[o]);for(var o=0;r.length>o;o++)a.push(r[o].position().top);be(t,function(t,e){e.css("top",a[t.row]+t.top)})}function d(t){for(var e=Y(),n=I(),r=[],a=h(t),o=0;e>o;o++){for(var i=a[o],s=[],l=0;n>l;l++)s.push(0);for(var c=0;i.length>c;c++){var u=i[c];u.top=q(s.slice(u.leftCol,u.rightCol+1));for(var l=u.leftCol;u.rightCol>=l;l++)s[l]=u.top+u.outerHeight}r.push(q(s))}return r}function h(t){var e,n,r,a=Y(),o=[];for(e=0;t.length>e;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;a>r;r++)o[r]=g(o[r]||[]);return o}function g(t){for(var e=[],n=m(t),r=0;n.length>r;r++)e.push.apply(e,n[r]);return e}function m(t){t.sort(De);for(var e=[],n=0;t.length>n;n++){for(var r=t[n],a=0;e.length>a&&we(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}function y(){var t,e=Y(),n=[];for(t=0;e>t;t++)n[t]=P(t).find("div.fc-day-content > div");return n}function w(t,e){var n=U();be(t,function(t,n,r){var a=t.event;a._id===e?b(a,n,t):n[0]._fci=r}),E(n,t,b)}function b(t,e,n){H(t)&&C.draggableDayEvent(t,e,n),n.isEnd&&R(t)&&C.resizableDayEvent(t,e,n),z(t,e)}function D(t,e){var n,r=te();e.draggable({delay:50,opacity:T("dragOpacity"),revertDuration:T("dragRevertDuration"),start:function(a,o){x("eventDragStart",e,t,a,o),L(t,e),r.start(function(r,a,o,i){if(e.draggable("option","revert",!r||!o&&!i),Q(),r){var s=ne(a),l=ne(r);n=p(l,s),$(u(v(t.start),n),u(S(t),n))}else n=0},a,"drag")},stop:function(a,o){r.stop(),Q(),x("eventDragStop",e,t,a,o),n?O(this,t,n,0,t.allDay,a,o):(e.css("filter",""),W(t,e))}})}function M(e,r,a){var o=T("isRTL"),i=o?"w":"e",s=r.find(".ui-resizable-"+i),l=!1;j(r),r.mousedown(function(t){t.preventDefault()}).click(function(t){l&&(t.preventDefault(),t.stopImmediatePropagation())}),s.mousedown(function(o){function s(n){x("eventResizeStop",this,e,n),t("body").css("cursor",""),c.stop(),Q(),f&&A(this,e,f,0,n),setTimeout(function(){l=!1},0)}if(1==o.which){l=!0;var c=te();Y(),I();var f,d,h=r.css("top"),v=t.extend({},e),g=ie(oe(e.start));K(),t("body").css("cursor",i+"-resize").one("mouseup",s),x("eventResizeStart",this,e,o),c.start(function(r,o){if(r){var s=re(o),l=re(r);if(l=Math.max(l,g),f=ae(l)-ae(s)){v.end=u(F(e),f,!0);var c=d;d=n(v,a.row,h),d=t(d),d.find("*").css("cursor",i+"-resize"),c&&c.remove(),L(e)}else d&&(W(e),d.remove(),d=null);Q(),$(e.start,u(S(e),f))}},o)}})}var C=this;C.renderDayEvents=e,C.draggableDayEvent=D,C.resizableDayEvent=M;var T=C.opt,x=C.trigger,H=C.isEventDraggable,R=C.isEventResizable,F=C.eventEnd,N=C.reportEventElement,z=C.eventElementHandlers,W=C.showEvents,L=C.hideEvents,O=C.eventDrop,A=C.eventResize,Y=C.getRowCnt,I=C.getColCnt;C.getColWidth;var P=C.allDayRow,B=C.colLeft,J=C.colRight,V=C.colContentLeft,G=C.colContentRight;C.dateToCell;var U=C.getDaySegmentContainer,Z=C.calendar.formatDates,$=C.renderDayOverlay,Q=C.clearOverlays,K=C.clearSelection,te=C.getHoverListener,ee=C.rangeToSegments,ne=C.cellToDate,re=C.cellToCellOffset,ae=C.cellOffsetToDayOffset,oe=C.dateToDayOffset,ie=C.dayOffsetToCellOffset}function we(t,e){for(var n=0;e.length>n;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function be(t,e){for(var n=0;t.length>n;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function De(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function Me(){function e(t,e,a){n(),e||(e=l(t,a)),c(t,e,a),r(t,e,a)}function n(t){f&&(f=!1,u(),s("unselect",null,t))}function r(t,e,n,r,a,o){f=!0,s("select",null,t,e,n,r,a,o)}function a(e){var a=o.cellToDate,s=o.getIsCellAllDay,l=o.getHoverListener(),f=o.reportDayClick;if(1==e.which&&i("selectable")){n(e);var d;l.start(function(t,e){u(),t&&s(t)?(d=[a(e),a(t)].sort(Y),c(d[0],d[1],!0)):d=null},e),t(document).one("mouseup",function(t){l.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,t),r(d[0],d[1],!0,t))})}}var o=this;o.select=e,o.unselect=n,o.reportSelection=r,o.daySelectionMousedown=a;var i=o.opt,s=o.trigger,l=o.defaultSelectionEnd,c=o.renderSelection,u=o.clearSelection,f=!1;i("selectable")&&i("unselectAuto")&&t(document).mousedown(function(e){var r=i("unselectCancel");r&&t(e.target).parents(r).length||n(e)})}function Ce(){function e(e,n){var r=o.shift();return r||(r=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),a.push(r.css(e).show()),r}function n(){for(var t;t=a.shift();)o.push(t.hide().unbind())}var r=this;r.renderOverlay=e,r.clearOverlays=n;var a=[],o=[]}function Se(t){var e,n,r=this;r.build=function(){e=[],n=[],t(e,n)},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,l=-1;for(a=0;o>a;a++)if(r>=e[a][0]&&e[a][1]>r){s=a;break}for(a=0;i>a;a++)if(t>=n[a][0]&&n[a][1]>t){l=a;break}return s>=0&&l>=0?{row:s,col:l}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function Te(e){function n(t){Ee(t);var n=e.cell(t.pageX,t.pageY);(!n!=!i||n&&(n.row!=i.row||n.col!=i.col))&&(n?(o||(o=n),a(n,o,n.row-o.row,n.col-o.col)):a(n,o),i=n)}var r,a,o,i,s=this;s.start=function(s,l,c){a=s,o=i=null,e.build(),n(l),r=c||"mousemove",t(document).bind(r,n)},s.stop=function(){return t(document).unbind(r,n),i}}function Ee(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function xe(t){function n(e){return a[e]=a[e]||t(e)}var r=this,a={},o={},i={};r.left=function(t){return o[t]=o[t]===e?n(t).position().left:o[t]},r.right=function(t){return i[t]=i[t]===e?r.left(t)+n(t).width():i[t]},r.clear=function(){a={},o={},i={}}}var He={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day",resourceDay:"resource"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},ke={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Re=t.fullCalendar={version:"1.6.4"},Fe=Re.views={};t.fn.fullCalendar=function(n){if("string"==typeof n){var a,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t.data(this,"fullCalendar");if(r&&t.isFunction(r[n])){var i=r[n].apply(r,o);a===e&&(a=i),"destroy"==n&&t.removeData(this,"fullCalendar")}}),a!==e?a:this}n=n||{};var i=n.eventSources||[];return delete n.eventSources,n.events&&(i.push(n.events),delete n.events),n=t.extend(!0,{},He,n.isRTL||n.isRTL===e&&He.isRTL?ke:{},n),this.each(function(e,a){var o=t(a),s=new r(o,n,i);o.data("fullCalendar",s),s.render()}),this},Re.sourceNormalizers=[],Re.sourceFetchers=[];var Ne={dataType:"json",cache:!1},ze=1;Re.addDays=u,Re.cloneDate=v,Re.parseDate=y,Re.parseISO8601=w,Re.parseTime=b,Re.formatDate=D,Re.formatDates=M;var We=["sun","mon","tue","wed","thu","fri","sat"],Le=864e5,Oe=36e5,Ae=6e4,Ye={s:function(t){return t.getSeconds()},ss:function(t){return I(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return I(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return I(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return I(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return I(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return I(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return 12>t.getHours()?"a":"p"},tt:function(t){return 12>t.getHours()?"am":"pm"},T:function(t){return 12>t.getHours()?"A":"P"},TT:function(t){return 12>t.getHours()?"AM":"PM"},u:function(t){return D(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return C(t)}};Re.dateFormatters=Ye,Re.applyAll=J,Fe.month=G,Fe.basicWeek=U,Fe.basicDay=Z,n({weekMode:"fixed"}),Fe.agendaWeek=K,Fe.agendaDay=te,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0}),Fe.resourceMultiDay=he,Fe.resourceDay=ve,t.fn.extend({scrollParent:function(){var e=this.css("position"),n="absolute"===e,r=this.parents().filter(function(){var e=t(this);return n&&"static"===e.css("position")&&"none"===e.css("float")?!1:/(auto|scroll|hidden)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==e&&r.length?r:t(this[0].ownerDocument||document)}}),n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})})(jQuery);